# A0114391M
###### DoLah\Commands\Command.h
``` h
    /**
     * @class SearchDateTaskCommand Command.h Commands/Command.h
     * @brief The Command class that encapsulates the action of searching for tasks falling 
     * between the given date range from the Calendar.
     */
    class SearchDateTaskCommand : public AbstractCommand {
    public:
        /**
         * Instantiates an instance of SearchTaskComamand with the given date range.
         *
         * @param from The start date and time of the search.
         * @param to The end date and time of the search.
         */
        SearchDateTaskCommand(std::tm, std::tm);
        ~SearchDateTaskCommand();

        /**
         * @brief When called, will call functions from the associated Calendar to search for
         * tasks with name fields containing the search string.
         */
        void execute();

        /**
         * @brief Not actually implemented and the Command is thus excluded from inclusion in
         * CommandHistory. Do not call this command.
         */
        void revert();

    private:
        std::tm from; ///< The start date and time of the search.
        std::tm to; ///< The end date and time of the search.
    };

```
###### DoLahUI\DisplayArea.cpp
``` cpp
// SETS UP THE CONTAINERS NEEDED FOR UI DISPLAY AREA

#include "DisplayArea.h"


namespace DoLah {
    DisplayArea::DisplayArea(QWidget *parent)
        : QScrollArea(parent)
    {
        this->setGeometry(QRect(5, 70, 340, 450));
        this->setFrameStyle(QFrame::NoFrame);
        this->setWidgetResizable(true);
        this->setFocusPolicy(Qt::NoFocus);
        initViewPort();
    }

    DisplayArea::~DisplayArea() {
    }

    void DisplayArea::initViewPort() {
        homePage = new QWidget;
        homeLayout = new QVBoxLayout(homePage);
        homeLayout->setAlignment(Qt::AlignTop);
        homeLayout->setSpacing(3);
        homeLayout->setContentsMargins(0, 0, 0, 0);

        donePage = new QWidget;
        doneLayout = new QVBoxLayout(donePage);
        doneLayout->setAlignment(Qt::AlignTop);
        doneLayout->setSpacing(3);
        doneLayout->setContentsMargins(0, 0, 0, 0);

        searchPage = new QWidget;
        searchLayout = new QVBoxLayout(searchPage);
        searchLayout->setAlignment(Qt::AlignTop);
        searchLayout->setSpacing(3);
        searchLayout->setContentsMargins(0, 0, 0, 0);

        tabbedView = new QStackedWidget(this);
        tabbedView->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
        tabbedView->addWidget(homePage);
        tabbedView->addWidget(donePage);
        tabbedView->addWidget(searchPage);

        this->setWidget(tabbedView);
    }
}
```
###### DoLahUI\DisplayArea.h
``` h
#pragma once
#include <QtWidgets/QVBoxLayout>
#include <QtWidgets/QScrollArea>
#include <QtWidgets/QWidget>
#include <QtWidgets/QSizePolicy>
#include <QtWidgets/QStackedWidget>

namespace DoLah {
    class DisplayArea :
        public QScrollArea
    {
        Q_OBJECT

    public:
        DisplayArea(QWidget *parent = 0);
        ~DisplayArea();
        QStackedWidget *tabbedView; /**< Manages the different task views*/
        QVBoxLayout *homeLayout;
        QVBoxLayout *searchLayout;
        QVBoxLayout *doneLayout;

    private:
        QWidget *homePage;
        QWidget *searchPage;
        QWidget *donePage;

        void initViewPort();
    };

}
```
###### DoLahUI\DoLahUI.cpp
``` cpp
#include "DoLahUI.h"
#include "Config/ConfigurationManager.h"

namespace DoLah {
    DoLahUI::DoLahUI(QWidget *parent)
        : QMainWindow(parent)
    {
        this->setupUI();
        Configuration config = ConfigurationManager::loadConfig();
        loadTheme(config.theme);
        QObject::connect(settingsWindow, SIGNAL(applyThemeSettings(int)), this, SLOT(setThemeConfig(int)));
    }

    DoLahUI::~DoLahUI() {
    }

    void DoLahUI::loadTheme(int index) {
        if (index == 0) {
            readAndSetStyleSheet("stylesheets/stylesheet.qss");
        }
        else if (index == 1) {
            readAndSetStyleSheet("stylesheets/night_stylesheet.qss");
        }
        else if (index == 2) {
            readAndSetStyleSheet("stylesheets/ordinaire_stylesheet.qss");
        }
    }

    void DoLahUI::readAndSetStyleSheet(const char *qss) {
        QFile stylesheet(qss);
        if (stylesheet.open(QIODevice::ReadOnly | QIODevice::Text))
        {
            this->setStyleSheet(stylesheet.readAll());
            stylesheet.close();
        }
    }

    // MAIN WINDOW

    void DoLahUI::setupUI() {
        if (this->objectName().isEmpty()) {
            this->setObjectName(QStringLiteral("DoLahUIWindow"));
        }
        this->setFixedSize(350, 570);
        this->setWindowFlags(Qt::CustomizeWindowHint | Qt::FramelessWindowHint);
        centralWidget = new QWidget(this);
        centralWidget->setObjectName(QStringLiteral("centralWidget"));
        this->setCentralWidget(centralWidget);
        initMenu();
        initDisplayArea();
        initInputArea();
        helpWindow = new HelpWindow(this);
        settingsWindow = new SettingsWindow(this);
        QObject::connect(settingsWindow, SIGNAL(applyStorageSettings(QString)), this, SLOT(setStorageLocation(QString)));

        QMetaObject::connectSlotsByName(this);
    }
    //////////////////////////////////////////
    // OVERRIDING CLICK AND KEYBOARD INPUTS //
    //////////////////////////////////////////
    // HANDLE DRAGGING OF WINDOW

    void DoLahUI::mousePressEvent(QMouseEvent *event) {
        if (event->button() == Qt::LeftButton) {
            dragPosition = event->globalPos() - frameGeometry().topLeft();
            event->accept();
        }
    }

    void DoLahUI::mouseMoveEvent(QMouseEvent *event) {
        if (event->buttons() & Qt::LeftButton) {
            move(event->globalPos() - dragPosition);
            event->accept();
        }
    }

    // HANDLE KEYPRESS EVENTS

    void DoLahUI::keyPressEvent(QKeyEvent *event) {
        if (event->key() == Qt::Key_Tab & event->modifiers() == Qt::ControlModifier) {
            int index = tabOrganizer->currentIndex();
            tabOrganizer->setCurrentIndex((index + 1) % 3);
        }
        else if (event->key() == Qt::Key_1 & event->modifiers() == Qt::ControlModifier) {
            goToHome();
        }
        else if (event->key() == Qt::Key_2 & event->modifiers() == Qt::ControlModifier) {
            goToDone();
        }
        else if (event->key() == Qt::Key_3 & event->modifiers() == Qt::ControlModifier) {
            goToSearch();
        }
        else if (event->key() == Qt::Key_PageUp) {
            QScrollBar *scrollbar = viewPort->verticalScrollBar();
            scrollbar->setValue(scrollbar->value() - scrollbar->singleStep());
        }
        else if (event->key() == Qt::Key_PageDown) {
            QScrollBar *scrollbar = viewPort->verticalScrollBar();
            scrollbar->setValue(scrollbar->value() + scrollbar->singleStep());
        }
        else {
            QMainWindow::keyPressEvent(event);
        }
    }

    //////////////////////////////////////////
    //            TOP MENU AREA             //
    //////////////////////////////////////////
    // INITIALIZATION

    void DoLahUI::initMenu() {
        menu = new QWidget(centralWidget);
        menu->setGeometry(QRect(0, 0, 350, 70));
        menuLayout = new QHBoxLayout(menu);
        menuLayout->setContentsMargins(5, 5, 5, 5);
        // DEFAULT VIEW
        homeButton = new MenuLabel;
        QPixmap homeIcon("images/home.png");
        homeButton->setPixmap(homeIcon);
        menuLayout->addWidget(homeButton);
        QObject::connect(homeButton, SIGNAL(clicked()), this, SLOT(goToHome()));
        // DONE TASKS VIEW
        doneButton = new MenuLabel;
        QPixmap doneIcon("images/done.png");
        doneButton->setPixmap(doneIcon);
        menuLayout->addWidget(doneButton);
        QObject::connect(doneButton, SIGNAL(clicked()), this, SLOT(goToDone()));
        // SEARCH RESULTS VIEW
        searchButton = new MenuLabel;
        QPixmap searchIcon("images/search.png");
        searchButton->setPixmap(searchIcon);
        menuLayout->addWidget(searchButton);
        QObject::connect(searchButton, SIGNAL(clicked()), this, SLOT(goToSearch()));
        // HELP WINDOW
        helpButton = new MenuLabel;
        QPixmap helpIcon("images/help.png");
        helpButton->setPixmap(helpIcon);
        menuLayout->addWidget(helpButton);
        QObject::connect(helpButton, SIGNAL(clicked()), this, SLOT(goToHelp()));
        // SETTINGS
        settingsButton = new MenuLabel;
        QPixmap settingsIcon("images/settings.png");
        settingsButton->setPixmap(settingsIcon);
        menuLayout->addWidget(settingsButton);
        QObject::connect(settingsButton, SIGNAL(clicked()), this, SLOT(goToSettings()));
        // EXIT
        exitButton = new MenuLabel;
        QPixmap exitIcon("images/exit.png");
        exitButton->setPixmap(exitIcon);
        menuLayout->addWidget(exitButton);
        QObject::connect(exitButton, SIGNAL(clicked()), this, SLOT(menuExit()));
        updateMenu(0);
    }

    void DoLahUI::clearMenuStyles() {
        homeButton->setStyleSheet("");
        doneButton->setStyleSheet("");
        searchButton->setStyleSheet("");
    }

    //////////////////////////////////////////
    //            DISPLAY AREA              //
    //////////////////////////////////////////
    // INITIALIZATION

    void DoLahUI::initDisplayArea() {
        viewPort = new DisplayArea(centralWidget);
        tabOrganizer = viewPort->tabbedView;
        QObject::connect(tabOrganizer, SIGNAL(currentChanged(int)), this, SLOT(updateMenu(int)));
        home = viewPort->homeLayout;
        done = viewPort->doneLayout;
        search = viewPort->searchLayout;
        loadTasks();
    }

    // METHODS TO UPDATE VIEWS

    void DoLahUI::loadTasks() {
        std::vector<AbstractTask*> taskList = (appClient.getCalendar()).getTaskList();
        for (int i = 0; i < static_cast<int>(taskList.size()); ++i) {
            createTaskBox(home, i + 1, taskList[i]);
        }
        std::vector<AbstractTask*> doneList = appClient.getCalendar().getDoneList();
        for (int j = 0; j < static_cast<int>(doneList.size()); ++j) {
            createTaskBox(done, j + 1, doneList[j]);
        }
        std::vector<AbstractTask*> searchedList = appClient.getCalendar().getSearchedTaskList();
        for (int k = 0; k < static_cast<int>(searchedList.size()); ++k) {
            createTaskBox(search, (searchedList[k])->getIndex() + 1, searchedList[k]);
        }
    }

    void DoLahUI::refreshTasks() {
        flushPage(home);
        flushPage(done);
        flushPage(search);
        loadTasks();
    }

    void DoLahUI::flushPage(QVBoxLayout *page) {
        QLayoutItem* child;
        while ((child = page->takeAt(0)) != 0)
        {
            QWidget* widget = child->widget();
            if (widget)
            {
                delete child->widget();
                delete child;
            }
        }
    }
    
    void DoLahUI::createTaskBox(QVBoxLayout *page, int index, AbstractTask *task) {
        UITaskBox *tempTaskBox = new UITaskBox(index, task);
        page->addWidget(tempTaskBox, 0, 0);
        QObject::connect(tempTaskBox, SIGNAL(confirmed(int, QString)), this, SLOT(handleEasyEdit(int, QString)));
        //QObject::connect(tempTaskBox, SIGNAL(setDone(QString, int)), this, SLOT(handleMenuDone(int)));
        /*QObject::connect(tempTaskBox, SIGNAL(setUndone(QString, int)), this, SLOT(handleMenuCommand(QString, int)));*/
    }

    //////////////////////////////////////////
    //              INPUT AREA              //
    //////////////////////////////////////////

    void DoLahUI::initInputArea() {
        message = new QLabel(centralWidget);
        message->setText("Enter a command:");
        message->setObjectName(QStringLiteral("message"));
        message->setGeometry(QRect(7, 520, 338, 20));

        lineEdit = new InputBox(centralWidget);
        lineEdit->setObjectName(QStringLiteral("inputarea"));
        lineEdit->setGeometry(QRect(5, 540, 340, 25));
        lineEdit->setFocus();

        // handles events when enter key is pressed
        QObject::connect(lineEdit, SIGNAL(returnPressed()), this, SLOT(handleUserInput()));
        QObject::connect(lineEdit, SIGNAL(returnPressed()), lineEdit, SLOT(clear()));
    }

    //////////////////////////////////////////
    //                SLOTS                 //
    //////////////////////////////////////////

    void DoLahUI::handleUserInput() {
        QString input = lineEdit->text();
        std::string inputline = input.toStdString();
        if (inputline.length() != 0) {
            lineEdit->arrangeStack();
            lineEdit->commandStackUp.push(inputline);
            try {
                if (inputline == "help") {
                    goToHelp();
                }
                else if (inputline == "settings") {
                    goToSettings();
                }
                else if (inputline == "exit") {
                    menuExit();
                }
                else {
                    this->appClient.parseAndProcessCommand(inputline);
                    refreshTasks();
                    message->clear();
                    message->setText("Done. Enter next command:");
                }
            }
            catch (std::exception e) {
                QString text = QString(e.what());
                message->clear();
                message->setText(text);
                refreshTasks();
            }
        }
        else {
            refreshTasks();
            message->clear();
            message->setText("Enter a command??");
        }
    }

    void DoLahUI::handleEasyEdit(int index, QString editedtext) {
        QString qcommand = QString("edit ") + QString::number(index) + " " + editedtext;
        std::string command = qcommand.toStdString();
        try {
            this->appClient.parseAndProcessCommand(command);
            message->clear();
            message->setText(QString("Edited task ").append(QString::number(index)));
            refreshTasks();
        }
        catch (std::exception e) {
            QString text = QString(e.what());
            message->clear();
            message->setText(text);
            refreshTasks();
        }
    }

    void DoLahUI::goToHome() {
        tabOrganizer->setCurrentIndex(0);
        viewPort->verticalScrollBar()->setValue(0);
    }

    void DoLahUI::goToDone() {
        tabOrganizer->setCurrentIndex(1);
        viewPort->verticalScrollBar()->setValue(0);
    }

    void DoLahUI::goToSearch() {
        tabOrganizer->setCurrentIndex(2);
        viewPort->verticalScrollBar()->setValue(0);
    }

    void DoLahUI::goToHelp() {
        if (helpWindow->isHidden()) {
            helpWindow->show();
        }
        else {
            message->clear();
            message->setText("Already showing help");
        }
    }

    void DoLahUI::goToSettings() {
        settingsWindow->exec();
    }

    void DoLahUI::setStorageLocation(QString url) {
        std::string location = url.toStdString();
        appClient.setStorageLocation(location);
        message->clear();
        message->setText("Settings changed");
        this->refreshTasks();
    }

    void DoLahUI::setThemeConfig(int theme) {
        appClient.setTheme(theme);
        message->clear();
        message->setText("Settings changed");
        this->refreshTasks();
    }

    void DoLahUI::menuExit() {
        exit(0);
    }

    void DoLahUI::updateMenu(int index) {
        if (index == 0) {
            clearMenuStyles();
            homeButton->setStyleSheet("border-bottom: 5px solid rgba(255, 255, 255, 0.5);");
        }
        else if (index == 1) {
            clearMenuStyles();
            doneButton->setStyleSheet("border-bottom: 5px solid rgba(255, 255, 255, 0.5);");
        }
        else {
            clearMenuStyles();
            searchButton->setStyleSheet("border-bottom: 5px solid rgba(255, 255, 255, 0.5);");
        }
    }
}
```
###### DoLahUI\DoLahUI.h
``` h
#ifndef DOLAHUI_H
#define DOLAHUI_H

#include "DoLahClient.h"
#include "UITaskBox.h"
#include "MenuLabel.h"
#include "DisplayArea.h"
#include "InputBox.h"
#include "HelpWindow.h"
#include "SettingsWindow.h"

#include <stdio.h>
#include <iostream>
#include <string>
#include <Windows.h>
#include <QtWidgets/QApplication>
#include <QtWidgets/QButtonGroup>
#include <QtWidgets/QHeaderView>
#include <QtWidgets/QLabel>
#include <QtWidgets/QVBoxLayout>
#include <QtWidgets/QHBoxLayout>
#include <QtWidgets/QMainWindow>
#include <QtWidgets/QWidget>
#include <QtWidgets/QSizePolicy>
#include <QFile>
#include <QMouseEvent>
#include <QScrollBar>

namespace DoLah {
    /**
    * \brief Setup the main window for the DoLah application.
    *
    * The main window is made up of 3 main components: the menu, DisplayArea, and InputBox.
    */
    class DoLahUI : public QMainWindow
    {
        Q_OBJECT

    public:
        DoLahUI(QWidget *parent = 0);
        ~DoLahUI();

        QFile stylesheet;
        QWidget *centralWidget; /**< Main widget of the main window. Classes that are to be displayed in the main window should set this as parent*/

        QWidget *menu; /**< QWidget containing the menu*/
        QHBoxLayout *menuLayout; /**< Layout to be applied to menu*/
        MenuLabel *homeButton;
        MenuLabel *doneButton;
        MenuLabel *searchButton;
        MenuLabel *helpButton;
        MenuLabel *settingsButton;
        MenuLabel *exitButton;

        DisplayArea *viewPort; /**< QWidget containing the display area*/
        QStackedWidget *tabOrganizer; /**< Manages the different task views*/
        QVBoxLayout *home; /**< Layout to be applied to default view*/
        QVBoxLayout *done; /**< Layout to be applied to done tasks menu*/
        QVBoxLayout *search; /**< Layout to be applied to search results view*/

        QLabel *message; /**< Message displaying program response to user input*/
        InputBox *lineEdit; /**< Input area where user input is entered*/

        HelpWindow *helpWindow;
        SettingsWindow *settingsWindow;

    protected:
        void mousePressEvent(QMouseEvent*); /**< Reimplemented from QWidget::mousePressEvent() */
        void mouseMoveEvent(QMouseEvent*); /**< Reimplemented from QWidget::mouseMoveEvent() */
        void keyPressEvent(QKeyEvent*); /**< Reimplemented from QWidget::keyPressEvent() */

    private slots:
        void handleUserInput(); /**< Handles the input in InputBox entered by the user */
        void handleEasyEdit(int, QString); /**< Handles the input in EasyEdit entered by the user */
        void goToHome(); /**< Sets the display area to show the default view*/
        void goToDone(); /**< Sets the display area to show the done tasks view*/
        void goToSearch(); /**< Sets the display area to show the search results view*/
        void goToHelp(); /**< Opens the help window*/
        void goToSettings(); /**< Opens the settings window*/
        void setStorageLocation(QString); /**< Sets the storage location for the file containing tasks data*/
        void setThemeConfig(int); /**< Sets the theme number in the config*/
        void menuExit(); /**< Quits the program*/
        void updateMenu(int); /**< Changes the appearance of the menu's tabs according to the active view*/

    private:
        void setupUI();
        void loadTheme(int);
        void readAndSetStyleSheet(const char*);
        void initMenu();
        void initDisplayArea();
        void initInputArea();
        void clearMenuStyles(); /**< Clears the tab indication appearance of the menu buttons*/
        /**
        * Creates a UITaskBox that displays a task
        * @param page the layout to where the created task box is added to
        * @param index index of the task
        * @param task AbstractTask to be added and displayed
        */
        void createTaskBox(QVBoxLayout*, int, AbstractTask*);
        void loadTasks(); /**< Loads tasks in all views*/
        void refreshTasks(); /**< Refreshes all views*/
        /**
        * Clears all tasks in the view
        * @param page the layout to be cleared
        */
        void flushPage(QVBoxLayout*);

        DoLah::DoLahClient appClient;
        QPoint dragPosition;
    };
}
#endif // DOLAHUI_H
```
###### DoLahUI\EasyEdit.cpp
``` cpp
#include "EasyEdit.h"

namespace DoLah {
    EasyEdit::EasyEdit(QWidget * parent, Qt::WindowFlags f)
        : QDialog(parent)
    {
        this->resize(450, 150);
        this->setWindowFlags(Qt::CustomizeWindowHint | Qt::FramelessWindowHint | Qt::Dialog);

        exitButton = new MenuLabel(this);
        exitButton->setObjectName(QStringLiteral("exitButton"));
        QPixmap exitIcon("images/dialog_exit.png");
        exitButton->setPixmap(exitIcon);
        exitButton->setGeometry(QRect(420, 0, 20, 20));
        QObject::connect(exitButton, SIGNAL(clicked()), this, SLOT(reject()));

        description = new QLabel(this);
        description->setGeometry(QRect(25, 40, 370, 20));

        editArea = new QLineEdit(this);
        editArea->setGeometry(QRect(25, 60, 370, 20));
        editArea->setFocus();

        buttonBox = new QDialogButtonBox(this);
        buttonBox->setObjectName(QStringLiteral("buttonBox"));
        buttonBox->setGeometry(QRect(0, 100, 450, 23));
        buttonBox->setCenterButtons(true);
        buttonBox->setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
        connect(buttonBox, SIGNAL(rejected()), this, SLOT(reject()));
    }

    EasyEdit::~EasyEdit() { }

    void EasyEdit::mousePressEvent(QMouseEvent *event) {
        if (event->button() == Qt::LeftButton) {
            dragPosition = event->globalPos() - frameGeometry().topLeft();
            event->accept();
        }
    }

    void EasyEdit::mouseMoveEvent(QMouseEvent *event) {
        if (event->buttons() & Qt::LeftButton) {
            move(event->globalPos() - dragPosition);
            event->accept();
        }
    }


}
```
###### DoLahUI\EasyEdit.h
``` h
#pragma once

#include "MenuLabel.h"

#include <QtWidgets/QDialog>
#include <QtWidgets/QLabel>
#include <QtWidgets/QLineEdit>
#include <QtWidgets/QDialogButtonBox>
#include <QMouseEvent>

namespace DoLah {
    class EasyEdit :
        public QDialog
    {
        Q_OBJECT

    public:
        EasyEdit(QWidget * parent = 0, Qt::WindowFlags f = 0);
        ~EasyEdit();

        MenuLabel *exitButton;
        QLabel *description;
        QLineEdit *editArea; /**< Input area where user can edit task*/
        QDialogButtonBox *buttonBox;

    protected:
        void mousePressEvent(QMouseEvent*); /**< Reimplemented from QWidget::mousePressEvent() */
        void mouseMoveEvent(QMouseEvent*); /**< Reimplemented from QWidget::mouseMoveEvent() */

    private:
        QPoint dragPosition;
    };

}
```
###### DoLahUI\HelpWindow.cpp
``` cpp
#include "HelpWindow.h"

namespace DoLah {
    HelpWindow::HelpWindow(QWidget * parent, Qt::WindowFlags f)
        : QDialog(parent)
    {
        this->resize(750, 500);
        this->setWindowFlags(Qt::CustomizeWindowHint | Qt::FramelessWindowHint | Qt::Dialog);
        this->setObjectName(QStringLiteral("helpwindow"));

        bgLabel = new QLabel(this);
        QPixmap background("images/helpwindow.jpg");
        bgLabel->setGeometry(QRect(0, 0, 308, 500));
        bgLabel->setPixmap(background);

        initNavi();
        initContents();

        exitButton = new MenuLabel(this);
        exitButton->setObjectName(QStringLiteral("exitButton"));
        QPixmap exitIcon("images/dialog_exit.png");
        exitButton->setPixmap(exitIcon);
        exitButton->setGeometry(QRect(720, 0, 20, 20));
        QObject::connect(exitButton, SIGNAL(clicked()), this, SLOT(reject()));
    }


    HelpWindow::~HelpWindow() {
    }

    void HelpWindow::initNavi() {
        navi = new QWidget(this);
        navi->setGeometry(28, 115, 200, 360);
        navilayout = new QVBoxLayout(navi);
        navilayout->setAlignment(Qt::AlignTop);
        navilayout->setSpacing(3);
        navilayout->setContentsMargins(0, 0, 0, 0);

        nav_basic = new MenuLabel;
        addNaviLabel(nav_basic, QString("Basic"));
        QObject::connect(nav_basic, SIGNAL(clicked()), this, SLOT(goToBasic()));
        nav_add = new MenuLabel;
        addNaviLabel(nav_add, QString("Adding Tasks"));
        QObject::connect(nav_add, SIGNAL(clicked()), this, SLOT(goToAdd()));
        nav_commands = new MenuLabel;
        addNaviLabel(nav_commands, QString("Commands"));
        QObject::connect(nav_commands, SIGNAL(clicked()), this, SLOT(goToCommands()));
        nav_datetime = new MenuLabel;
        addNaviLabel(nav_datetime, QString("Date/Time Format"));
        QObject::connect(nav_datetime, SIGNAL(clicked()), this, SLOT(goToDateTime()));
        nav_keyboard = new MenuLabel;
        addNaviLabel(nav_keyboard, QString("Keyboard Shortcuts"));
        QObject::connect(nav_keyboard, SIGNAL(clicked()), this, SLOT(goToKeyboard()));
        nav_other = new MenuLabel;
        addNaviLabel(nav_other, QString("Other Features"));
        QObject::connect(nav_other, SIGNAL(clicked()), this, SLOT(goToOther()));
        nav_about = new MenuLabel;
        addNaviLabel(nav_about, QString("About"));
        QObject::connect(nav_about, SIGNAL(clicked()), this, SLOT(goToAbout()));
        updateNav(0);

        QLabel *instructions = new QLabel("use PGUP/PGDN OR UP/DOWN ARROWS to navigate through the help pages");
        instructions->setWordWrap(true);
        instructions->setMinimumHeight(100);
        instructions->setAlignment(Qt::AlignCenter);
        navilayout->addWidget(instructions);
    }

    void HelpWindow::initContents() {
        helpcontents = new QStackedWidget(this);
        helpcontents->setGeometry(QRect(278, 25, 450, 450));
        QObject::connect(helpcontents, SIGNAL(currentChanged(int)), this, SLOT(updateNav(int)));

        page_basic = new QLabel;
        initPage(page_basic, "images/help_basic.png");
        page_add = new QLabel;
        initPage(page_add, "images/help_add.png");
        page_commands = new QLabel;
        initPage(page_commands, "images/help_commands.png");
        page_datetime = new QLabel;
        initPage(page_datetime, "images/help_datetime.png");
        page_keyboard = new QLabel;
        initPage(page_keyboard, "images/help_keyboard.png");
        page_other = new QLabel;
        initPage(page_other, "images/help_other.png");
        page_about = new QLabel;
        initPage(page_about, "images/help_about.png");

    }

    void HelpWindow::addNaviLabel(QLabel* label, QString text) {
        label->setText(text);
        label->setObjectName(QStringLiteral("helpnavi"));
        navilayout->addWidget(label);
    }

    void HelpWindow::initPage(QLabel* page, QString imgsrc) {
        QPixmap img(imgsrc);
        page->setPixmap(img);
        helpcontents->addWidget(page);
    }

    void HelpWindow::clearStyles() {
        nav_basic->setStyleSheet("");
        nav_add->setStyleSheet("");
        nav_datetime->setStyleSheet("");
        nav_commands->setStyleSheet("");
        nav_keyboard->setStyleSheet("");
        nav_other->setStyleSheet("");
        nav_about->setStyleSheet("");
    }

    void HelpWindow::mousePressEvent(QMouseEvent *event) {
        if (event->button() == Qt::LeftButton) {
            dragPosition = event->globalPos() - frameGeometry().topLeft();
            event->accept();
        }
    }

    void HelpWindow::mouseMoveEvent(QMouseEvent *event) {
        if (event->buttons() & Qt::LeftButton) {
            move(event->globalPos() - dragPosition);
            event->accept();
        }
    }

    void HelpWindow::keyPressEvent(QKeyEvent *event) {
        if (event->key() == Qt::Key_PageUp || event->key() == Qt::Key_Up) {
            int index = helpcontents->currentIndex();
            if (index != 0) {
                helpcontents->setCurrentIndex(index - 1);
            }
        }
        else if (event->key() == Qt::Key_PageDown || event->key() == Qt::Key_Down) {
            int index = helpcontents->currentIndex();
            if (index != 6) {
                helpcontents->setCurrentIndex(index + 1);
            }
        }
        else {
            QDialog::keyPressEvent(event);
        }
    }

    //////////////////////////////////////////
    //                SLOTS                 //
    //////////////////////////////////////////

    void HelpWindow::goToBasic() {
        helpcontents->setCurrentIndex(0);
    }
    void HelpWindow::goToAdd() {
        helpcontents->setCurrentIndex(1);
    }
    void HelpWindow::goToCommands() {
        helpcontents->setCurrentIndex(2);
    }
    void HelpWindow::goToDateTime() {
        helpcontents->setCurrentIndex(3);
    }
    void HelpWindow::goToKeyboard() {
        helpcontents->setCurrentIndex(4);
    }
    void HelpWindow::goToOther() {
        helpcontents->setCurrentIndex(5);
    }
    void HelpWindow::goToAbout() {
        helpcontents->setCurrentIndex(6);
    }

    void HelpWindow::updateNav(int index) {
        if (index == 0) {
            clearStyles();
            nav_basic->setStyleSheet("background-color: rgba(0, 0, 0, 0.5); color: white;");
        }
        else if (index == 1) {
            clearStyles();
            nav_add->setStyleSheet("background-color: rgba(0, 0, 0, 0.5); color: white;");
        }
        else if (index == 2) {
            clearStyles();
            nav_commands->setStyleSheet("background-color: rgba(0, 0, 0, 0.5); color: white;");
        }
        else if (index == 3) {
            clearStyles();
            nav_datetime->setStyleSheet("background-color: rgba(0, 0, 0, 0.5); color: white;");
        }
        else if (index == 4) {
            clearStyles();
            nav_keyboard->setStyleSheet("background-color: rgba(0, 0, 0, 0.5); color: white;");
        }
        else if (index == 5) {
            clearStyles();
            nav_other->setStyleSheet("background-color: rgba(0, 0, 0, 0.5); color: white;");
        }
        else {
            clearStyles();
            nav_about->setStyleSheet("background-color: rgba(0, 0, 0, 0.5); color: white;");
        }
    }
}
```
###### DoLahUI\HelpWindow.h
``` h
#pragma once
#include "MenuLabel.h"

#include <QtWidgets/QDialog>
#include <QtWidgets/QLabel>
#include <QtWidgets/QVBoxLayout>
#include <QtWidgets/QStackedWidget>
#include <QMouseEvent>

namespace DoLah {
    class HelpWindow :
        public QDialog
    {
        Q_OBJECT

    public:
        HelpWindow(QWidget * parent = 0, Qt::WindowFlags f = 0);
        ~HelpWindow();

        QLabel *bgLabel; /**< Holds the background image of the help window*/
        MenuLabel *exitButton;
        QWidget *navi;
        QVBoxLayout *navilayout;
        MenuLabel *nav_basic;
        QLabel *page_basic;
        MenuLabel *nav_add;
        QLabel *page_add;
        MenuLabel *nav_commands;
        QLabel *page_commands;
        MenuLabel *nav_datetime;
        QLabel *page_datetime;
        MenuLabel *nav_keyboard;
        QLabel *page_keyboard;
        MenuLabel *nav_other;
        QLabel *page_other;
        MenuLabel *nav_about;
        QLabel *page_about;
        QStackedWidget *helpcontents;

    protected:
        void mousePressEvent(QMouseEvent*); /**< Reimplemented from QWidget::mousePressEvent() */
        void mouseMoveEvent(QMouseEvent*); /**< Reimplemented from QWidget::mouseMoveEvent() */
        void keyPressEvent(QKeyEvent*); /**< Reimplemented from QWidget::keyPressEvent() */

    private slots:
        void goToBasic();
        void goToAdd();
        void goToDateTime();
        void goToCommands();
        void goToKeyboard();
        void goToOther();
        void goToAbout();
        void updateNav(int); /**< Changes the appearance of the navigation according to the active page*/

    private:
        void initNavi();
        /**
        * Adds a label with the desired text to the navigation
        * @param label Label to be added
        * @param text Text of the label
        */
        void addNaviLabel(QLabel*, QString);
        void clearStyles(); /**< Clears the navigation page indication*/
        void initContents();
        void initPage(QLabel*, QString);
        QPoint dragPosition;
    };
}
```
###### DoLahUI\InputBox.cpp
``` cpp
#include "InputBox.h"

namespace DoLah {
    InputBox::InputBox(QWidget *parent)
        : QLineEdit(parent)
    {
    }

    InputBox::~InputBox() { }

    void InputBox::keyPressEvent(QKeyEvent *event) {
        if (event->key() == Qt::Key_Up) {
            if (!commandStackUp.empty()) {
                std::string prev = commandStackUp.top();
                commandStackDown.push(prev);
                this->commandStackUp.pop();
                this->setText(QString::fromStdString(prev));
            }
        }
        else if (event->key() == Qt::Key_Down) {
            if (!commandStackDown.empty()) {
                std::string next = commandStackDown.top();
                commandStackUp.push(next);
                this->commandStackDown.pop();
                this->setText(QString::fromStdString(next));
            }
            else {
                this->clear();
            }
        }
        else {
            QLineEdit::keyPressEvent(event);
        }
    }

    void InputBox::arrangeStack() {
        while (!commandStackDown.empty()) {
            commandStackUp.push(commandStackDown.top());
            commandStackDown.pop();
        }
    }
}
```
###### DoLahUI\InputBox.h
``` h
#pragma once
#include <QtWidgets/QLineEdit>
#include <stack>
#include <QMouseEvent>

namespace DoLah {
    class InputBox :
        public QLineEdit
    {
        Q_OBJECT

    public:
        InputBox(QWidget *parent = 0);
        ~InputBox();
        void arrangeStack(); /**< Moves all commands back up to commandstack_up */

        std::stack<std::string> commandStackUp; /**< Contains previous commands */
        std::stack<std::string> commandStackDown; /**< Contains previous commands that have been scrolled down */

    protected:
        void keyPressEvent(QKeyEvent*); /**< Reimplemented from QWidget::keyPressEvent() */
    };

}
```
###### DoLahUI\main.cpp
``` cpp
#include "DoLahUI.h"


int main(int argc, char *argv[]) {
    QApplication app(argc, argv);
    DoLah::DoLahUI window;
    window.show();
    FreeConsole();
    return app.exec();
}
```
###### DoLahUI\MenuLabel.cpp
``` cpp
#include "MenuLabel.h"


namespace DoLah {
    MenuLabel::MenuLabel(QWidget *parent)
        : QLabel(parent) {
        this->setMinimumHeight(65);
        this->setObjectName(QStringLiteral("menuButton"));
    }

    MenuLabel::~MenuLabel() {

    }

    void MenuLabel::mousePressEvent(QMouseEvent* event) {
        emit clicked();
        if (event->button() == Qt::LeftButton) {
            event->accept();
        }
    }

    void MenuLabel::mouseMoveEvent(QMouseEvent *event) {
        if (event->buttons() & Qt::LeftButton) {
            event->accept();
        }
    }

}
```
###### DoLahUI\MenuLabel.h
``` h
#pragma once
#include <QtWidgets/QLabel>
#include <QtWidgets/QApplication>
#include <QMouseEvent>

namespace DoLah {
    class MenuLabel : public QLabel
    {
        Q_OBJECT

    public:
        MenuLabel(QWidget *parent = 0);
        ~MenuLabel();

    signals:
        void clicked(); /**< This signal is emitted when the user clicks on the label */

    protected:
        void mousePressEvent(QMouseEvent*); /**< Reimplemented from QWidget::mousePressEvent() */
        void mouseMoveEvent(QMouseEvent*); /**< Reimplemented from QWidget::mouseMoveEvent() */

    };

}
```
###### DoLahUI\SettingsWindow.cpp
``` cpp
#include "SettingsWindow.h"


namespace DoLah {
    SettingsWindow::SettingsWindow(QMainWindow * parent) {
        this->mainWin = parent;
        this->setParent(parent);
        this->resize(300, 270);
        this->setWindowFlags(Qt::CustomizeWindowHint | Qt::FramelessWindowHint | Qt::Dialog);
        storageSettings();
        themeOptions();

        exitButton = new MenuLabel(this);
        exitButton->setObjectName(QStringLiteral("exitButton"));
        QPixmap exitIcon("images/dialog_exit.png");
        exitButton->setPixmap(exitIcon);
        exitButton->setGeometry(QRect(270, 0, 20, 20));
        QObject::connect(exitButton, SIGNAL(clicked()), this, SLOT(reject()));

        buttonBox = new QDialogButtonBox(this);
        buttonBox->setObjectName(QStringLiteral("buttonBox"));
        buttonBox->setGeometry(QRect(0, 220, 300, 23));
        buttonBox->setCenterButtons(true);
        buttonBox->setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
        connect(buttonBox, SIGNAL(accepted()), this, SLOT(applyChanges()));
        connect(buttonBox, SIGNAL(rejected()), this, SLOT(cancelChanges()));
    }

    SettingsWindow::~SettingsWindow()
    {
    }

    void SettingsWindow::storageSettings() {
        fileBrowser = new QFileDialog(this);
        fileBrowser->setFileMode(QFileDialog::Directory);
        storageLocationBox = new QLineEdit(this);
        storageLocationBox->setReadOnly(true);
        storageLocationBox->setGeometry(QRect(20, 100, 200, 20));
        Configuration config = ConfigurationManager::loadConfig();
        originalLocation = QString::fromUtf8(config.storagefile.c_str());
        if (originalLocation == "calendar.yaml") {
            originalLocation = QDir::currentPath();
        }
        else {
            originalLocation.remove("/calendar.yaml");
        }
        storageLocationBox->setText(originalLocation);
        browseButton = new QPushButton(this);
        browseButton->setText("Browse");
        browseButton->setGeometry(QRect(230, 98, 50, 23));
        connect(browseButton, SIGNAL(clicked()), this, SLOT(browseLocation()));
    }

    void SettingsWindow::themeOptions() {
        themeSelection = new QComboBox(this);
        themeSelection->addItem("Default");
        themeSelection->addItem("Night");
        themeSelection->addItem("Ordinaire");
        themeSelection->setGeometry(QRect(50, 170, 200, 20));
        Configuration config = ConfigurationManager::loadConfig();
        originalTheme = config.theme;
        themeSelection->setCurrentIndex(originalTheme);
        connect(themeSelection, SIGNAL(currentIndexChanged(int)), this, SLOT(changeTheme(int)));
    }

    void SettingsWindow::browseLocation() {
        selectedLocation = fileBrowser->getExistingDirectory(this, tr("Select Task Data Storage Location"));
        if (selectedLocation.length() != 0) {
            storageLocationBox->setText(selectedLocation);
        }
    }

    void SettingsWindow::changeTheme(int index) {
        if (index == 0) {
            readAndSetStyleSheet("stylesheets/stylesheet.qss");
            themeSelection->setCurrentIndex(0);
        }
        else if (index == 1) {
            readAndSetStyleSheet("stylesheets/night_stylesheet.qss");
            themeSelection->setCurrentIndex(1);
        }
        else if (index == 2) {
            readAndSetStyleSheet("stylesheets/ordinaire_stylesheet.qss");
            themeSelection->setCurrentIndex(2);
        }
    }

    void SettingsWindow::applyChanges() {
        originalTheme = themeSelection->currentIndex();
        emit applyThemeSettings(originalTheme);
        QString formattedUrl;
        if (storageLocationBox->text() == originalLocation) {
        }
        else {
            originalLocation = storageLocationBox->text();
            formattedUrl = originalLocation + "/calendar.yaml";
            emit applyStorageSettings(formattedUrl);
        }
        this->accept();
    }

    void SettingsWindow::cancelChanges() {
        changeTheme(originalTheme);
        storageLocationBox->setText(originalLocation);
        this->reject();
    }

    void SettingsWindow::readAndSetStyleSheet(const char *qss) {
        QFile stylesheet(qss);
        if (stylesheet.open(QIODevice::ReadOnly | QIODevice::Text))
        {
            mainWin->setStyleSheet(stylesheet.readAll());
            stylesheet.close();
        }
    }

    void SettingsWindow::keyPressEvent(QKeyEvent *event) {
        if (event->key() == Qt::Key_Escape) {
            this->cancelChanges();
        }
        else {
            QDialog::keyPressEvent(event);
        }
    }
}
```
###### DoLahUI\SettingsWindow.h
``` h
#pragma once
#include "MenuLabel.h"
#include "Config/ConfigurationManager.h"

#include <QtWidgets/QDialog>
#include <QtWidgets/QLineEdit>
#include <QtWidgets/QFileDialog>
#include <QtWidgets/QComboBox>
#include <QtWidgets/QLabel>
#include <QtWidgets/QDialogButtonBox>
#include <QtWidgets/QPushButton>
#include <QMainWindow>
#include <QFile>

namespace DoLah {
    class SettingsWindow :
        public QDialog
    {
        Q_OBJECT

    public:
        SettingsWindow(QMainWindow * parent);
        ~SettingsWindow();
        QLineEdit *storageLocationBox; /**< Where user-selected storage location is displayed*/
        MenuLabel *exitButton;
        QDialogButtonBox *buttonBox;
        QPushButton *browseButton;

    signals:
        void applyStorageSettings(QString); /**< This signal is emitted when the user presses the ok button in the EasyEdit window*/
        void applyThemeSettings(int);

    protected:
        void keyPressEvent(QKeyEvent*); /**< Reimplemented from QWidget::keyPressEvent() */

    private slots:
        void browseLocation(); /**< Opens fileBrowser, then gets and stores the user-selected location */
        void changeTheme(int); /**< Changes the theme according to user selection */
        void applyChanges();
        void cancelChanges();

    private:
        int originalTheme;
        QFileDialog *fileBrowser;
        QString originalLocation;
        QString selectedLocation;
        QComboBox *themeSelection;
        QMainWindow *mainWin;
        void storageSettings();
        void themeOptions(); /**< Initializes the drop down menu allowing theme selection */
        /**
        * Reads stylesheet from a QSS file and sets it as the main window stylesheet
        * @param qss file name of the QSS stylesheet to be loaded
        */
        void readAndSetStyleSheet(const char*);
    };
}
```
###### DoLahUI\UITaskBox.cpp
``` cpp
#include "UITaskBox.h"


namespace DoLah {
    UITaskBox::UITaskBox(int index, AbstractTask *task) {
        this->setWordWrap(true);
        this->setFrameStyle(QFrame::NoFrame);
        this->index = index;
        this->task = task;
        dynamicCast(index, task);
        easyEdit = new EasyEdit(this);
        QObject::connect(easyEdit->buttonBox, SIGNAL(accepted()), this, SLOT(handleEasyEdit()));

    }

    UITaskBox::~UITaskBox() { }

    QSize UITaskBox::sizeHint() const {
        return QSize(350, 300);
    }

    void UITaskBox::dynamicCast(int index, AbstractTask *task) {
        std::string name = task->getName();
        QString tasktitle = "<font size=4><b>" + QString::number(index) + ". " + QString::fromStdString(name);

        if (FloatingTask *fTask = dynamic_cast<FloatingTask*>(task)) {
            this->setObjectName(QStringLiteral("Floating"));
            this->setText(tasktitle);
            editabletext = QString::fromStdString(name);
        }
        else if (DeadlineTask *dTask = dynamic_cast<DeadlineTask*>(task)) {
            this->setObjectName(QStringLiteral("Deadline"));
            char deadline[100];
            strftime(deadline, 100, "%a %e %b %Y %I:%M%p", &(dTask->getDueDate()));
            tidyDate(deadline);
            editabletext = QString::fromStdString(name) + " by " + QString(deadline);
            if (task->isDone()) {
                QString contents = tasktitle.append("</font><br><font size=3>" + QString(deadline));
                this->setText(contents);
            }
            else if (task->isExpired()) {
                QString contents = tasktitle.append("</font><br><font size=3><font color=#fc7370>" + QString(deadline));
                this->setText(contents);
            }
            else {
                QString contents = tasktitle.append("</font><br><font size=3><font color=#6270d6>" + QString(deadline));
                this->setText(contents);
            }

        }
        else if (EventTask *eTask = dynamic_cast<EventTask*>(task)) {
            this->setObjectName(QStringLiteral("Event"));
            char start[100];
            char end[100];
            strftime(start, 100, "%a %e %b %Y %I:%M%p", &(eTask->getStartDate()));
            strftime(end, 100, "%a %e %b %Y %I:%M%p", &(eTask->getEndDate()));
            tidyDate(start);
            tidyDate(end);
            editabletext = QString::fromStdString(name) + " from " + QString(start) + " to " + QString(end);
            if (task->isDone()) {
                QString contents = tasktitle.append("</font><br><font size=3>" + QString(start) + " to " + QString(end));
                this->setText(contents);
            }
            else if (task->isExpired()) {
                QString contents = tasktitle.append("</font><br><font size=3><font color=#fc7370>" + QString(start) + " to " + QString(end));
                this->setText(contents);
            }
            else {
                QString contents = tasktitle.append("</font><br><font size=3><font color=#6270d6>" + QString(start) + " to " + QString(end));
                this->setText(contents);
            }
        }
        if (task->isExpired()) {
            this->setObjectName(QStringLiteral("Due"));
        }
        if (task->isDone()) {
            this->setObjectName(QStringLiteral("Done"));
        }
    }

    void UITaskBox::tidyDate(char date[]) {
        if (isspace(date[4])) {
            for (int i = 4; i < 100; i++) {
                date[i] = date[i + 1];
            }
        }
    }

    //////////////////////////////////////////
    // OVERRIDING CLICK AND KEYBOARD INPUTS //
    //////////////////////////////////////////

    void UITaskBox::mousePressEvent(QMouseEvent *event) {
        event->ignore();
    }
    void UITaskBox::mouseMoveEvent(QMouseEvent *event) {
        event->ignore();
    }
    void UITaskBox::mouseDoubleClickEvent(QMouseEvent *event) {
        if (event->button() == Qt::LeftButton) {
            if (!task->isDone()) {
                easyEdit->editArea->setText(editabletext);
                QString temp = QString("Edit task ") + QString::number(index) + ":";
                easyEdit->description->setText(temp);
                easyEdit->exec();
            }
        }
    }

    //////////////////////////////////////////
    //                SLOTS                 //
    //////////////////////////////////////////

    void UITaskBox::handleEasyEdit() {
        if (!easyEdit->editArea->text().isEmpty()) {
            emit confirmed(index, easyEdit->editArea->text());
        }
        else {
            easyEdit->reject();
        }
    }
}
```
###### DoLahUI\UITaskBox.h
``` h
#ifndef UITASKBOX_H
#define UITASKBOX_H

#include "DoLahClient.h"
#include "EasyEdit.h"

#include <QtWidgets/QAction>
#include <QtWidgets/QLabel>
#include <QtWidgets/QMenu>
#include <QTextDocument>
#include <QMouseEvent>

namespace DoLah {
    class UITaskBox : public QLabel
    {
        Q_OBJECT

    public:
        UITaskBox(int, AbstractTask*);
        ~UITaskBox();
        QSize sizeHint() const; /**< Reimplemented from QWidget::sizeHint() */

        EasyEdit *easyEdit;

    signals:
        void confirmed(int, QString); /**< This signal is emitted when the user presses the ok button in the EasyEdit window */

    protected:
        void mousePressEvent(QMouseEvent*); /**< Reimplemented from QWidget::mousePressEvent() */
        void mouseMoveEvent(QMouseEvent*); /**< Reimplemented from QWidget::mouseMoveEvent() */
        void mouseDoubleClickEvent(QMouseEvent*); /**< Reimplemented from QWidget::mouseDoubleClickEvent() */

    private slots:
        void handleEasyEdit(); /**< Handles what happens when user presses ok in easyedit */

    private:
        /**
        * Casts AbstractTask to either EventTask, DeadlineTask, or FloatingTask, formats and displays it in the UITaskBox
        * @param index index of the task
        * @param task AbstractTask to be casted and displayed
        */
        void dynamicCast(int, AbstractTask*);
        /**
        * Removes the extra space padding from strftime %e
        * @param date Date to be manipulated
        */
        void tidyDate(char*);

        QString editabletext;
        int index;
        AbstractTask *task;
    };

}

#endif // UITASKBOX_H
```
